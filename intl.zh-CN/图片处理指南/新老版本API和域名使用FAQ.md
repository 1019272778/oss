# 新老版本API和域名使用FAQ {#concept_tmj_dxc_wdb .concept}

## 新版API与老版API的方式主要区别： {#section_ir2_3xc_wdb .section}

-   新版API：`http://bucket.<endpoint>/object?x-oss-process=image/action,parame_value`

    所有的图片处理操作都通过`x-oss-process`进行传递。每个action之间顺序执行，无需通道进行管理。

-   老版本的API：`http://channel.<endpoint>/object@action.format`

    操作通过`@`作为分隔符进行处理。


## 使用OSS域名来使用图片处理有什么优势以及区别？ {#section_ot1_kxc_wdb .section}

|对比项|采用IMG域名访问|直接使用OSS域名访问|
|---|---------|-----------|
|使用方式|存储与处理两套域名系统|上传、管理、处理、分发，一站式处理|
|是否支持新版API|支持|支持|
|是否支持老版API|支持|默认不支持|
|是否支持https|不支持|支持|
|是否支持vpc网络|不支持|支持|
|是否支持多域名绑定|不支持|支持|
|是否支持源站更新自动刷新阿里CDN|不支持|支持|

**说明：** 

-   现在OSS域名已经全面支持图片处理服务，不过只能使用新版的API。而原有的IMG域名能够使用新老两个版本的API。
-   如果IMG域名期望能够进行多CDN加速，可以通过在CDN配置回源host的方式直接访问IMG域名，不需要进行域名绑定来完成CDN加速。

## 控制台这里对于两个API方式以及两种域名访问方式逻辑是怎样的？ {#section_un4_mxc_wdb .section}

之前开启老版图片处理的Bucket：

-   保持与原来基本一致的逻辑，用户看到的是老版IMG的域名，以及之前已经绑定的自定义域名。
-   用户在IMG域名上进行的原图保护等配置，对于OSS域名没有效果。当在跨区域复制中开启同步时，会将原图保护以及样式分隔符同步到OSS域名。
-   当用户关闭当前Bucket的图片处理服务时，会清空样式配置以及域名绑定，并自动跳转到新版的页面。

新创建的Bucket或者之前没有开启IMG服务的Bucket:

-   默认是能够使用图片处理服务的，无需开通，也没有关闭。
-   无需绑定域名，域名绑定操作直接同Bucket本身的域名管理一致。

## 使用老版API的用户如何切换到OSS域名上呢？ {#section_ms1_4xc_wdb .section}

老版本的API暂时没有办法在OSS域名上面使用，如有特殊情况可以工单联系我们；但样式的方式两个域名都能兼容。所以如果您所有的图片都是通过样式方式访问，那么进行切换主要下面两个步骤：

1.  在当前图片服务配置里面，开启配置同步；这样样式分隔符以及原图保护能够同步到OSS域名。
2.  如果使用了自定义域名，将原有的自定义域名CNAME改到OSS域名即可。

## 样式配置IMG域名与OSS域名是否一致？ {#section_icb_pxc_wdb .section}

所有的样式配置在IMG域名与OSS域名都是共享的。不存在IMG配置的域名在OSS域名上面不能使用的问题。

